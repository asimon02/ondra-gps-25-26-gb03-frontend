<div>
  <label class="block text-sm font-medium text-neutral mb-3 mt-2">{{ label }}</label>

  <!-- Modo lectura -->
  <div
    *ngIf="!isEditing"
    class="flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-primary transition-colors group">
    <div class="flex items-center gap-3 flex-1">
      <svg class="w-5 h-5 text-neutral" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
      </svg>
      <span
        [class]="isTextarea ? 'text-gray-900 whitespace-pre-line' : 'text-gray-900'"
        class="flex-1">
        {{ value || 'Sin especificar' }}
      </span>
    </div>

    <button
      (click)="startEditing()"
      class="text-primary hover:text-blue-700 text-sm font-medium transition-colors opacity-0 group-hover:opacity-100">
      Editar
    </button>
  </div>

  <!-- Modo edición -->
  <div *ngIf="isEditing" class="space-y-2">

    <!-- Input normal -->
    <input
      *ngIf="!isTextarea"
      type="text"
      [(ngModel)]="editedValue"
      [disabled]="isSaving"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100"
      [placeholder]="'Ingresa tu ' + label.toLowerCase()">

    <!-- Textarea para biografía -->
    <textarea
      *ngIf="isTextarea"
      [(ngModel)]="editedValue"
      [disabled]="isSaving"
      rows="5"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-gray-100 resize-none"
      [placeholder]="'Ingresa tu ' + label.toLowerCase()">
    </textarea>

    <div class="flex gap-2">
      <button
        (click)="saveChanges()"
        [disabled]="isSaving"
        class="flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
        <span *ngIf="!isSaving">Guardar</span>
        <span *ngIf="isSaving" class="flex items-center justify-center gap-2">
          <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
          Guardando...
        </span>
      </button>

      <button
        (click)="cancelEditing()"
        [disabled]="isSaving"
        class="flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50">
        Cancelar
      </button>
    </div>
  </div>
</div>
