<div class="carousel-container">
  
  <!-- Header -->
  <div class="carousel-header">
    <h3 class="carousel-title">{{ titulo }}</h3>
    
    <div class="carousel-controls">
      <!-- Bot√≥n recargar -->
      <button 
        class="btn-reload" 
        (click)="recargar()"
        [disabled]="isLoading"
        title="Recargar recomendaciones"
      >
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          fill="none" 
          viewBox="0 0 24 24" 
          stroke="currentColor"
          [class.spinning]="isLoading"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
      </button>

      <!-- Botones de navegaci√≥n -->
      <div class="nav-buttons">
        <button 
          class="nav-btn prev"
          (click)="anterior()"
          [disabled]="!puedeIrAnterior || isLoading"
          title="Anterior"
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        
        <button 
          class="nav-btn next"
          (click)="siguiente()"
          [disabled]="!puedeIrSiguiente || isLoading"
          title="Siguiente"
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="carousel-loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Cargando recomendaciones...</p>
  </div>

  <!-- Error State -->
  <div class="carousel-error" *ngIf="error && !isLoading">
    <div class="error-icon">‚ö†Ô∏è</div>
    <p>{{ error }}</p>
    <button class="btn-retry" (click)="recargar()">
      Reintentar
    </button>
  </div>

  <!-- Empty State -->
  <div class="carousel-empty" *ngIf="!isLoading && !error && items.length === 0">
    <div class="empty-icon">üé∏</div>
    <p>No hay recomendaciones disponibles</p>
    <p class="empty-hint">Configura tus preferencias musicales para obtener recomendaciones</p>
  </div>

  <!-- Carrusel -->
  <div class="carousel-wrapper" *ngIf="!isLoading && !error && items.length > 0">
    
    <!-- Track del carrusel -->
    <div class="carousel-track-container">
      <div 
        class="carousel-track"
        [style.transform]="transformOffset"
      >
        <div 
          *ngFor="let item of items; let i = index"
          class="carousel-item"
          [style.width.%]="100 / itemsPerView"
        >
          <!-- Card del item -->
          <div class="item-card" [routerLink]="getRutaDetalle(item)">
            
            <!-- Badge de tipo -->
            <div class="type-badge" [attr.data-type]="item.tipo">
              <span>{{ getEmojiTipo(item.tipo) }}</span>
            </div>

            <!-- Cover -->
            <div 
              class="item-cover"
              [style.background-color]="getColorGenero(item.idGenero)"
            >
              <div class="cover-overlay">
                <button class="btn-play">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8 5v14l11-7z"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Info -->
            <div class="item-info">
              <h4 class="item-title" [title]="item.titulo">
                {{ item.titulo }}
              </h4>
              <span 
                class="item-genre"
                [style.color]="getColorGenero(item.idGenero)"
              >
                {{ item.genero }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Indicadores de puntos -->
    <div class="carousel-indicators" *ngIf="items.length > itemsPerView">
      <button
        *ngFor="let punto of puntosIndicadores; let i = index"
        class="indicator-dot"
        [class.active]="i === puntoActivo"
        (click)="irAIndice(i * itemsPerView)"
        [attr.aria-label]="'Ir a p√°gina ' + (i + 1)"
      ></button>
    </div>
  </div>

</div>